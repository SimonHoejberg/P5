\section{Ultrasonic Sensor}\label{SensTheoUltra}
The ultrasonic sensors works by producing sound waves from
one of two frontal holes, which is then bounced back by an object and received
by the second hole. This is displayed in the illustration below
\autoref{soundWavesSensor}.
The delay between producing and receiving the sound wave is used to determine the
distance to a given object.

% For the purpose of measuring the distance to the chosen target, the turret makes
% use of two ultrasonic sensors. These sensors work by producing sound waves from
% one of two frontal holes, which is then bounced back by an object and received
% by the second hole. This is displayed in the illustration below
% \autoref{soundWavesSensor}.
% The delay between producing and receiving the sound wave is used to determine the
% distance to a given object. 

\figx{soundWavesSensor}{Visualization of the ultrasonic sensor.}
The described sensor is a standardized ultrasonic sensor from Lego NXT. The
sensor's technical specifications \citep{Ultrasonic_sensor} can be found below:
\begin{itemize}
  \item Has a max range of 2.5m
  \item Has a precision of +/- 3cm
  \item Loses precision after 1.5m
  \item Has a 15ms delay between readings
  \item Works best with hard, large-sized objects
  \item Each measurement outputs the distance in the form of a single integer
  with a value between 0 and 255cm
\end{itemize}

An image of this sensor as mounted in the turret can be seen in
\autoref{UltrasoundPic}.
\figx[0.2]{UltrasoundPic}{The two ultrasonic sensors and the camera mounted
on the turret.}

\section{Ultrasonic Sensor Testing}\label{SensorTest}
The first sensor we need to test is the ultrasonic distance sensor. These tests
will be used to verify the contents of the technical specification, and
to gain a deeper understanding of how the sensor operates and what
problems could occur when using it. As such, the tests will consist of
clarifying the following points:
\begin{itemize}
  \item Where and how is the sensor best placed on the turret?
  \item What is the sensors maximum distance?
  \item At what distance is the data no longer accurate?
\end{itemize}

\subsection{Ultrasonic Sensor Test - Setup}\label{UltraTestSetup}
The setup for testing the ultrasonic sensor consists of placing the turret on
the floor along a wall, and pointing towards a target at various distances along
the wall. This wall is marked with a number of lines each representing a
distance of 10cm from the turret's location. The target for this test is a
rectangular cardboard cutout, which is used to hold a sheet of coloured paper
which is folded around it. This setup can be seen in
\autoref{SensorUltraSetup.JPG}.

\figx[0.1]{SensorUltraSetup.JPG}{The test setup for testing the ultrasonic
distance sensor.}

\subsection{Ultrasonic Sensor Test - Placement}\label{UltraTestPlacement}
The first test consists of determining where on the turret the sensor should be
placed. The purpose of this test is to optimize the quality of the data which
the sensor collects, and to help determine some design choices for the
turret.\nl

% This test was concucted by placing the ultrasonic sensor at different places on
% the turret, and then testing the sensors maximum distance. As the test was done
% as a part of the initial turret design, it does not include any formalized data
% sets. As such, these were the conclusions which could be drawn:\nl

\subsubsection{\fix{Using Blinders}{Skal vi rent faktisk bruge dem?}} 
At first when testing the ultrasonic sensors, it was determined that the
sensor's ability to accurately measure the distance was subject to interferance
by the surroundings. In effect this vastly reduced the maximum distance of the
sensor, and as such, a lot of different attempts were made in order to solve
this problem. As this was done as a part of the initial design phase, the
different turret designs were not recorded. The tests resulted in the
following conclusion:\nl

\textit{\textbf{The ultrasonic sensors can use blinders to increase their
maximum sensing distance.}}\nl

In order to determine the importance of using blinders, this subsection will be
used to present data which compares the distance tests of the ultrasonic sensor,
both with and without blinders.

\graphL{Actual distance [cm]}{Measured distance
[cm]}{shieldedBoxStanding,shieldedBoxLandscape}{Box Standing, Box
Landscape}{Results with a shielded sensor and a box h.
14.2cm and w. 9cm}{shieldedTestBox}

\graphL{Actual distance [cm]}{Measured distance
[cm]}{unshieldedBoxStanding,unshieldedBoxLandscape}{Box Standing, Box
Landscape}{Results with a unshielded sensor and a box h.
14.2cm and w. 9cm}{unshieldedTestBox}

\graphL{Actual distance [cm]}{Measured distance
[cm]}{shieldedPaperStanding,shieldedPaperLandscape}{Paper Standing, Paper
Landscape}{Results with a shielded sensor and a A4 Paper}{shieldedTestPaper}

\graphL{Actual distance [cm]}{Measured distance
[cm]}{unshieldedPaperStanding,unshieldedPaperLandscape}{Paper Standing, Paper
Landscape}{Results with a unshielded sensor and a A4 Paper}{unshieldedTestPaper}


As seen in \autoref{graph:shieldedTestBox}, \autoref{graph:unshieldedTestBox},
\autoref{graph:shieldedTestPaper} and \autoref{graph:unshieldedTestPaper} the
sensor was able to determine the distance with better precision when it is
shielded and the object was in the landscape position. \nl

It can then be concluded that the shielded sensor performed a lot better than
the unshielded, it can also be concluded that the dimensions of the object can
have a big impact. This is due to the fact that the sensor does not have a very
large field of view. Therefore, the object should be wider rather than taller.

\subsubsection{Additional Design notes}
These tests also found the following conclusion:\nl

\fix{The sensor should not be placed close to the ground.}{The small height
distance from the ground matters and how do we see this?} While testing it was
determined that the sensor should not be placed close to the ground, as this resulted in a vast degredation of the data. Compared to the technical specification which stated that the maximum range is 255cm, this design resulted
in a maximum distance of ~100cm.\nl

\subsection{Ultrasonic Sensor Test - Distance}
The second test on the ultrasonic sensor is designed to determine the accuracy
of the sensors measurements compared to the actual distance. As such, the test
was conducted using test setup explained in \autoref{UltraTestSetup} using the
two ultrasonic sensors. The measurements were done at varying distances with an
interval of 25cm, and were measured 5 times at each distance. The results from
this test is presented below in \autoref{table:UltDistTestDat}. The complete
data sets can be found in \autoref{UltraDistTestData}.

\dataTable{UltrasonicDistanceTestData}{Average measured distance compared to
the actual distance.}{UltDistTestData}


% \subsection{Ultrasonic Sensor Test - Cone of Vision}
% The third test is intended to determine the sensors cone of vision, that is, how
% far off to the side can an object be placed and still be able to be registered
% by the sensor. This test was conducted by placing the target at varying
% distances, and then moving the target off to the side ultil it could no longer
% be registered by any of the two sensors. The results from
% this test is presented below in \autoref{table:UltConeTestDat}. The complete
% data sets can be found in \autoref{UltraConeTestData}.
% 
% \dataTable{UltrasonicConeTestData}{Width of sensing for
% the ultrasonic sensors.}{UltConeTestDat}

% The test of the ultrasonic sensor was divided into 4 different experiments, the
% difference between the experiments are the size of the object being tracked and
% whether the sensor is shielded or not. The different object sizes was tested
% with a shielded sensor and a non shielded sensor. \nl



% \subsection{Infrared}
% The test of the infrared sensor was not able to be conducted since there were
% some issues with the different sensors. The first sensor did not work at all.
% Since it was an infrared sensor, a camera was used to see if the infrared
% LED lid up. Since it did not light we concluded that the sensor was broken. \nl
%
% When trying to test the other sensor, first it did not give a reading so the
% same test was conducted using a camera to see if the sensor was broken. It was
% concluded that the sensor was not broken. It was then discovered that it was a
% problem with the software, where the address for the reading the sensor on the
% I2C port was changed. This meant that it was not possible to get a proper
% reading. The readings were either 0 or a reading above 60.000 depending on which
% port was used. \nl
%
% Another issue with using the infrared sensor is the range. The medium range
% infrared sensor only has a range from 10 to 80 cm. Therefore this sensor could
% become a very limiting factor in regards to how far the target can be placed
% from the cannon.



% several parts, these parts will heavily rely
% on the technical specifications of the camera. Therefore the first part of this
% section will be on the technical specifications of the camera and the needed
% software.\nl
%
% The camera runs at 30 fps and with a resolution of 88 x 144. This could
% potentialy become an issue due to the fact that it is a very low resolution.
% Although this is a could be a problem, it depends on how large the
% object/objects being tracked are.
% The camera also has the ability to track up to 8 different objects
% \fix{\Source}{Kan vi refere til de tekniske specfikationer i user guide}. \nl
%
% The setup of the camera is quite simple and is done using a computer, to setup
% which color it is suposed to track. The process of choosing the color is done
% using some software that comes with the camera, here a colormap is made which
% tells the preprocessor on the camera which colors to track.
%
% There are three different test that can be done, the first to
% determine which colour the camera best sees, the second to see how
% far the camera can track an object and the third to determine if lighting up the
% object changed the cameras abillity to track the colour \/ object.\nl
%
% The first test is to determine what colour the camera best can see, to do this
% a square of paper with the same size will be used to make sure that the only
% diffence is the colour of the paper. The setup of the test is that the camera
% should stay at the same place so that the lighting condition stays the same,
% then the paper square is place at a certain distance to the camera. The result
% of each test is how many blobs of the tracking was the recordnised and how
% consisten the size of the coloured blob is.\nl
%
% The second test, to test how far the camera can track objects is to do this the
% turret it setup in the same manner as the test before, here the object which is
% the paper is moved further and further away, optional could the colours of the
% paper be changed to see how well the different colours can be seen from a
% distance. The results of this test is the distance that the camera can see each
% colour and again how consisten it is.\nl
%
% The third test, to test weather lighting up the object with an flashlight
% improves how well the camera sees the object, again this test needs to bed setup
% in the same manner at the two other test with the turret in the same place
% thoughout the test and then the test pocedes as test 2 with observering how far
% away it can see the object and as a result determine if the flashlight is
% nessery and what colour works best with it.
%
